import sys
from predictor import smart_analyze

def process_order(order_id, items):
    print(f"üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞ #{order_id}...")
    
    # --- 1. –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ö–û–ù–¢–ï–ö–°–¢) ---
    # –ú–æ–¥–µ–ª—å "—É–≤–∏–¥–∏—Ç" —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–π–º–µ—Ç —Å—É—Ç—å –æ—à–∏–±–∫–∏
    cart_items = items
    total_items_count = len(cart_items) # –†–∞–≤–Ω–æ 3
    tax_rate = 0.2
    currency = "USD"
    
    # –≠–º—É–ª—è—Ü–∏—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
    # –û–®–ò–ë–ö–ê –ó–î–ï–°–¨: –ú—ã –ø—ã—Ç–∞–µ–º—Å—è –≤–∑—è—Ç—å 5-–π —ç–ª–µ–º–µ–Ω—Ç (–∏–Ω–¥–µ–∫—Å 4), 
    # —Ö–æ—Ç—è –≤ —Å–ø–∏—Å–∫–µ –≤—Å–µ–≥–æ 3 —ç–ª–µ–º–µ–Ω—Ç–∞.
    target_item_index = 4 
    
    print(f"   –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –∏–Ω–¥–µ–∫—Å–æ–º {target_item_index}...")
    
    # –≠—Ç–æ –≤—ã–∑–æ–≤–µ—Ç IndexError
    selected_product = cart_items[target_item_index]
    
    return selected_product

# --- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ ---
if __name__ == "__main__":
    try:
        # –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–≤—Å–µ–≥–æ 3 —à—Ç—É–∫–∏)
        user_cart = ['Laptop', 'Mouse', 'Keyboard']
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —É–ø–∞–¥–µ—Ç
        process_order(1024, user_cart)

    except Exception:
        print("\nüí• –û–®–ò–ë–ö–ê –ü–ï–†–ï–•–í–ê–ß–ï–ù–ê! –ó–∞–ø—É—Å–∫ AI-–∞–Ω–∞–ª–∏–∑–∞...\n")
        
        # === –í–´–ó–û–í –í–ê–®–ï–ì–û –ú–û–î–£–õ–Ø ===
        # –ü–µ—Ä–µ–¥–∞–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏, —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å
        smart_analyze(*sys.exc_info())